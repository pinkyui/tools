/*
 * @license
 * Tools.js v1.0.0-alpha
 * Copyright (c) 2019-present illvart
 * https://github.com/illvart
 */
!function(e,t){"use strict";var n,i=[],r="",o=null;String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e});var a=function(e){return"string"==typeof e},u=function(e){return"function"==typeof e},l=function(e){return e===r},s=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c=function(e,n){return a(e)?t.querySelector(e):e.querySelector(n)},d=function(e,n){return a(e)?Array.prototype.slice.call(t.querySelectorAll(e)):Array.prototype.slice.call(e.querySelectorAll(n))},f=function(e,t){for(var n=arguments,i=[],r=arguments.length-2;r-- >0;)i[r]=n[r+2];return setTimeout.apply(void 0,[e,+t||0].concat(i))},p=function(e,t,i){var r,o;if(e)if(null!==(o=e)&&"object"==typeof o)for(n in e)s(e,n)&&t.call(i,e[n],n,e);else for(n=0,r=e.length;n<r;n++)t.call(i,e[n],n,e);return e},y=function(e){e.preventDefault(),e.stopPropagation()},v=function(e,t){return e.some((function(e){if(t.endsWith(e))return!0}))},g={get:function(t,n){var i=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return i.open("GET",t,!0),i.onload=function(){n&&u(n)&&n(this)},i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(),i},post:function(t,n,i){var r=a(n)?n:Object.keys(n).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])})).join("&"),o=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return o.open("POST",t,!0),o.onreadystatechange=function(){i&&u(i)&&i(this)},o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(r),o}},m=function(e){return c("#"+e+"-inout")},h=function(e){return c("#"+e+"-input")},L=function(e){return c("#"+e+"-output")},b=function(e){return c("#"+e+"-submit")},x=function(e){return c("#"+e+"-clear")},R=function(e){return c("#"+e+"-copy")},w=function(e){return c("#"+e+"-alert")},H=function(e){return c("#"+e+"-undo")},M=function(e){return c("#"+e+"-size")},E=function(e){return c("#"+e+"-options")},S=function(e){return c("#"+e+"-settings")},U=function(e){return c("#"+e+"-settings textarea")},T=function(e){return c("#"+e+"-download")},k=function(e){return c("#"+e+"-example")},q=function(e){return c("#"+e+"-example-btn")},z=function(e){return c("#"+e+"-external")},O=function(e){return c("#"+e+"-upload")},A=function(e){return c("#"+e+"-load")},X=function(e){return c("#"+e+"-load-url")},j=function(e){return e.style.display="block"},B=function(e){return e.style.display="inline-block"},F=function(e){return e.style.display="none"},C=function(e){return"none"===e.style.display},P=function(e){return"inline-block"===e.style.display},W=function(e){return"block"===e.style.display},I=function(e){return e.disabled=!0},D=function(e){if(!0===e.disabled)return e.disabled=!1},N=function(e){return!0===e.checked},$=function(e){return String(e).split(r).reverse().join(r).replace(/(...)(?!$)/g,"$1,").split(r).reverse().join(r)},G=function(e){return e<1024?e+" Bytes":e>=1024&&e<1048576?(e/1024).toFixed(1)+" KB":e>=1048576?(e/1048576).toFixed(1)+" MB":void 0},K=function(e,t){return e>t},Y=function(t,n,i){n=n||r,i=i||"text/plain",t.href=function(t,n){var i=new Blob([t],{type:n+";charset=utf-8"});return null!==o&&e.URL.revokeObjectURL(o),o=e.URL.createObjectURL(i)}(n,i)},J=function(t){e.scroll({behavior:"smooth",left:0,top:t.getBoundingClientRect().top+e.pageYOffset+-300})},Q="scrollBehavior"in t.documentElement.style;function V(e,t){var n=(t=t||{}).type?t.type:null,i=!!t.delay.enable&&t.delay.enable,o=t.delay.duration?t.delay.duration:0,a=t.content?t.content:null,u=t.param?" "+t.param:r,l=w(e);W(l)||(l.classList.add(n),l.innerHTML=a+u,j(l));var s=function(){W(l)&&l.classList.contains(n)&&(F(l),l.innerHTML=r,l.classList.remove("warning","danger","info"))};!0===i&&f(s,o)}var Z=function(t,i,r,o,a,l,s,c,d){e.FileReader&&p(i,(function(e){if(function(e,t){for(n=0;n<t.length;n++)if(e.type===t[n])return!0;return!1}(e,r))if(K(e.size,a))V(s,{delay:{enable:!0,duration:c.duration||4e3},type:c.type||"warning",content:"File name "+e.name+" is over size, maximum "+l+"."});else{var i=new FileReader;i.onload=function(n){t.value=n.target.result,d&&u(d)&&d(e)},i.readAsText(e)}else V(s,{delay:{enable:!0,duration:c.duration||4e3},type:c.type||"warning",content:"File name "+e.name+": "+(c.text||"Not a valid file type. Update your selection file with type")+" ("+o+")."})}))};e.tools=function(e,n,o){var a,u,s,f,_,ee=(o=o||{}).settings;a=m(e),u=h(e);var te=a||u,ne=L(e),ie=b(e),re=x(e),oe=R(e),ae=T(e),ue=H(e),le=w(e),se=M(e),ce=E(e),de=S(e),fe=U(e),pe=k(e),ye=q(e),ve=z(e),ge=O(e),me=A(e),he=X(e);ie.addEventListener("click",(function(){if(s=te.value,l(s))V(e,{delay:{enable:!0,duration:ee.empty.duration||1500},type:ee.empty.type||"warning",content:ee.empty.text||"Sorry, Input is empty!"});else{console.clear(),W(le)&&F(le);try{f=n(s),_=(ne||a).value=f,s===_?(D(ie),V(e,{delay:{enable:!0,duration:ee.sameAs.druation||5e3},type:ee.sameAs.type||"info",content:ee.sameAs.text||"Well done, the code already modified, maybe the code same output as this tool!"})):(i.push(s),I(ie),B(ue),function(e,t,n){if(e){j(e);var i=t.length-n.length,r=t.length?(100*i/t.length).toFixed(2):0;e.innerHTML="Original size: <strong>"+$(t.length)+" bytes</strong>.<br> Output size: <strong>"+$(n.length)+" bytes</strong>.<br> Saving: <strong>"+$(i)+" bytes ("+r+"%)</strong>.</span>"}}(se,s,_),function(e,t){if(e){var n=e.getAttribute("data-download-type");B(e),t=t.replace(/\n/g,"\r\n"),Y(e,t,n)}}(ae,_),Q&&(a?J(a):ne&&J(ne)))}catch(e){return void(o.exception&&o.exception(e))}te.addEventListener("input",D.bind(null,ie),!1)}}),!1),function(e,t,n,r,o,a){var u=L(e);t.addEventListener("click",(function(e){e.preventDefault();var s=i.pop();n.value=s,0===i.length&&F(t),a&&(F(a),Y(a)),u&&l(u.value)?F(o):C(o)&&B(o),D(r)}))}(e,ue,te,ie,oe,ae),function(e,n,i){var r=m(e),o=(h(e),L(e));r?r.addEventListener("input",(function(){l(r.value)?F(n):B(n)}),!1):o&&i.addEventListener("click",(function(){l(o.value)?F(n):B(n)}),!1),n.addEventListener("click",(function(e){e.preventDefault(),r?(r.focus(),r.select()):o&&(o.focus(),o.select()),t.execCommand&&(t.execCommand("copy"),Q&&(r?J(r):o&&J(o)))}))}(e,oe,ie),function(e,t,n,i,o,a){var u=m(e),l=h(e),s=L(e);t.addEventListener("click",(function(){u?(u.value=r,u.focus()):s&&(s.value=r,l.value=r,l.focus()),D(n),P(i)&&F(i),o&&F(o),a&&(F(a),Y(a))}),!1)}(e,re,ie,oe,se,ae),function(e,t,n,i){(e||t||n)&&(e.addEventListener("click",(function(){N(e)?(D(i),j(t)):F(t)}),!1),n.addEventListener("input",(function(){W(t)&&D(i)}),!1))}(ce,de,fe,ie),function(e){var t=d(".tools-switch");t&&p(t,(function(t){t.addEventListener("click",D.bind(null,e),!1)}))}(ie),ae&&Y(ae),function(e,t,n,i){var r=c("[data-tools-expand]",e);if(r){var o=function(){r.style.height="auto",r.scrollHeight>460?r.style.height="460px":(r.style.height=r.scrollHeight+"px",r.style.maxHeight="460px")};r.addEventListener("input",o,!1),t.addEventListener("click",o,!1),n.addEventListener("click",o,!1),i.addEventListener("click",o,!1)}}(te,ie,re,ue),function(e,t){if(e||t){var n=c("#tools-example-toggle",e);t.addEventListener("click",(function(){W(e)?(F(e),n.innerText="Show"):(j(e),n.innerText="Hide")}),!1)}}(pe,ye),function(e,t,n,i,r){if(c("[data-tools-drag]",e)){function o(o){y(o);var a=r.drag.error,u=r.files.inputMimeTypes,l=r.files.inputMimeHumans,s=r.files.inputMaxSizeBytes,c=r.files.inputMaxSizeHumans,d=o.dataTransfer.files;"drop"===o.type&&Z(e,d,u,l,s,c,t,a,(function(){B(n),D(i)}))}e.addEventListener("dragenter",o,!1),e.addEventListener("dragover",o,!1),e.addEventListener("drop",o,!1)}}(te,e,oe,ie,o),function(e,t,n,i,r,o,a){if(e||t){t.addEventListener("change",(function(t){y(t);var u=a.upload.error,l=a.files.inputMimeTypes,s=a.files.inputMimeHumans,d=a.files.inputMaxSizeBytes,f=a.files.inputMaxSizeHumans,p=t.target.files,v=c(".tools-file-info",e);v&&Z(n,p,l,s,d,f,i,u,(function(e){B(r),D(o),v.innerText="File name "+e.name+", file size "+G(e.size)+"."}))}),!1)}}(ve,ge,te,e,oe,ie,o),function(e,t,n,i,o,a,u){var s=u.loadURL.corsAPI||r;if(e||t){t.addEventListener("click",(function(){var t=u.loadURL.empty,c=u.loadURL.error,d=u.loadURL.fail,f=u.files.inputUrlExtensions,p=u.files.inputUrlHumans,y=u.files.inputMaxSizeBytes,m=u.files.inputMaxSizeHumans;l(e.value)?V(i,{delay:{enable:!0,duration:t.duration||1500},type:t.type||"warning",content:t.text||"Sorry, Input URL is empty!"}):v(f,e.value)?(n.value=u.loadURL.loading||"Loading...",n.readOnly=!0,g.get(s+e.value,(function(t){n.readOnly=!1,B(o),D(a);var u=t.responseText;4===t.readyState&&200===t.status&&-1===u.toLowerCase().indexOf("error")?K(u.length,y)?(V(i,{delay:{enable:!0,duration:c.duration||4e3},type:c.type||"warning",content:"URL "+e.value+" that containing data is over size, maximum "+m+"."}),n.value=r):n.value=u:4===t.readyState&&(V(i,{delay:{enable:!0,duration:d.duration||4e3},type:d.type||"danger",content:d.text||"Something has gone wrong, maybe server busy or invalid URL? <br>Try again later."}),n.value=r)}))):V(i,{delay:{enable:!0,duration:c.duration||4e3},type:c.type||"warning",content:"URL "+e.value+": "+(c.text||"Not a valid URL. Update your input URL with valid extension or ends with")+" ("+p+")."})}),!1)}}(me,he,te,e,oe,ie,o)},e.tools.alert=V}(window,window.document);
